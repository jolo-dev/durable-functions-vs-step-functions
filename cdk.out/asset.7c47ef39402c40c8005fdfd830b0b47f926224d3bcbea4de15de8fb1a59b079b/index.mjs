import{SFNClient as r,StartExecutionCommand as o}from"@aws-sdk/client-sfn";var s=new r({}),a=async n=>{console.log("Start Step Functions handler:",JSON.stringify(n,null,2));try{let t=new o({stateMachineArn:process.env.STATE_MACHINE_ARN,input:JSON.stringify(n),name:n.requestId||`step-${Date.now()}`}),e=await s.send(t);return{statusCode:202,body:JSON.stringify({message:"Step Function execution started",executionArn:e.executionArn,requestId:n.requestId||`step-${Date.now()}`})}}catch(t){return console.error("Error starting Step Function:",t),{statusCode:500,body:JSON.stringify({error:"Failed to start Step Function",details:t instanceof Error?t.message:"Unknown error"})}}};export{a as handler};
